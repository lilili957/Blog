(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b967609"],{2676:function(e,t,a){},2831:function(e,t,a){"use strict";var n=a("2676"),s=a.n(n);s.a},"495e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticClass:"cate_mana_header"},[a("el-input",{staticStyle:{width:"200px","margin-top":"10px"},attrs:{placeholder:"请输入栏目信息"},model:{value:e.cateName,callback:function(t){e.cateName=t},expression:"cateName"}}),a("el-button",{staticStyle:{margin:"10px auto auto 10px",height:"40px"},attrs:{type:"primary",size:"medium"},on:{click:e.addNewCate}},[e._v("新增栏目")])],1),a("el-main",{staticClass:"cate_mana_main"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.categories,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"left"}}),a("el-table-column",{attrs:{label:"编号",prop:"id",width:"120",align:"left"}}),a("el-table-column",{attrs:{label:"栏目名称",prop:"cateName",width:"120",align:"left"}}),a("el-table-column",{attrs:{label:"启用时间",prop:"date",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.date)))]}}])}),a("el-table-column",{attrs:{label:"操作",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v(" 编辑 ")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v(" 删除 ")])]}}])})],1),this.categories.length>0?a("el-button",{staticStyle:{"margin-top":"10px",width:"100px"},attrs:{type:"danger",disabled:0==this.selItems.length},on:{click:e.deleteAll}},[e._v(" 批量删除 ")]):e._e()],1)],1)},s=[],i=(a("d81d"),a("7c15")),o={name:"CateMana",data:function(){return{cateName:"",selItems:[],categories:[],loading:!1}},mounted:function(){this.loading=!0,this.refresh()},methods:{handleSelectionChange:function(e){console.log(e),this.selItems=e},addNewCate:function(){this.loading=!0;var e=this;Object(i["c"])("/admin/category/",{cateName:this.cateName}).then((function(t){if(200==t.status){var a=t.data;e.$message({type:a.status,message:a.msg}),e.cateName="",e.refresh()}e.loading=!1}),(function(t){403==t.response.status&&e.$message({type:"error",message:t.response.data}),e.loading=!1}))},refresh:function(){var e=this;Object(i["b"])("/admin/category/all").then((function(t){e.categories=t.data,e.loading=!1}),(function(t){403==t.response.status&&e.$message({type:"error",message:t.response.data})})),e.loading=!1},deleteAll:function(){var e=this;this.$confirm("确定删除这"+this.selItems.length+"条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log("进入Promise");var t=e.selItems,a="";console.log("到达map前"),t.map((function(e){a+=e.id+","})),e.deleteCate(a.substring(0,a.length-1))})).catch((function(){e.loading=!1}))},deleteCate:function(e){var t=this;this.loading=!0,Object(i["a"])("/admin/category/"+e).then((function(e){var a=e.data;t.$message({type:a.status,message:a.msg}),t.refresh()}),(function(e){t.loading=!1,403==e.response.status?t.$message({type:"error",message:e.response.data}):500==e.response.status&&t.$message({type:"error",message:"该栏目下尚有文章， 删除失败!"})}))},handleDelete:function(e,t){var a=this;this.$confirm("确定删除"+t.cateName+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.deleteCate(t.id)})).catch((function(){a.$message({type:"warning",message:"已取消"}),a.loading=!1}))},handleEdit:function(e,t){var a=this;this.$prompt("请输入新名称","编辑",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:t.cateName}).then((function(e){var n=e.value;null==n||0==n.length?a.$message({type:"info",message:"栏目名称不能为空"}):(a.loading=!0,Object(i["d"])("/admin/category/",{id:t.id,cateName:n}).then((function(e){200==e.status&&a.$message({type:"success",message:"更新成功"}),a.refresh()}),(function(e){403==e.response.status&&a.$message({type:e.response.status,message:e.response.data})})),a.loading=!1)}))}}},l=o,r=(a("2831"),a("2877")),c=Object(r["a"])(l,n,s,!1,null,"1f9ad666",null);t["default"]=c.exports},d81d:function(e,t,a){"use strict";var n=a("23e7"),s=a("b727").map,i=a("1dde"),o=a("ae40"),l=i("map"),r=o("map");n({target:"Array",proto:!0,forced:!l||!r},{map:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-4b967609.74fc6ef3.js.map